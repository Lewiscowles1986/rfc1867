<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="846px" preserveAspectRatio="none" style="width:1597px;height:846px;" version="1.1" viewBox="0 0 1597 846" width="1597px" zoomAndPan="magnify"><defs><filter height="300%" id="f8pgrtx88lip3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class NodeInterface--><rect fill="#FEFECE" filter="url(#f8pgrtx88lip3)" height="188.8516" id="NodeInterface" style="stroke: #A80036; stroke-width: 1.5;" width="309" x="263" y="299"/><ellipse cx="368.25" cy="315" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M369.2031,311.7813 L369.2031,318.2969 L370.9219,318.2969 C371.375,318.2969 371.5156,318.3281 371.6875,318.4531 C371.9219,318.625 372.0313,318.875 372.0313,319.1563 C372.0313,319.7188 371.6719,320 370.9219,320 L365.7813,320 C365.375,320 365.1719,319.9531 365.0156,319.8281 C364.7969,319.6719 364.6563,319.4063 364.6563,319.1563 C364.6563,318.8594 364.8125,318.5781 365.0625,318.4219 C365.2188,318.3125 365.3438,318.2969 365.7813,318.2969 L367.5,318.2969 L367.5,311.7813 L365.7813,311.7813 C365.3594,311.7813 365.1719,311.75 365.0156,311.6406 C364.7969,311.4688 364.6563,311.2188 364.6563,310.9375 C364.6563,310.6563 364.8125,310.3594 365.0625,310.2031 C365.2188,310.1094 365.3438,310.0938 365.7813,310.0938 L370.9219,310.0938 C371.375,310.0938 371.5156,310.125 371.6875,310.2344 C371.9219,310.4063 372.0313,310.6719 372.0313,310.9375 C372.0313,311.2344 371.8906,311.5156 371.625,311.6719 C371.5,311.75 371.3125,311.7813 370.9219,311.7813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="90" x="388.75" y="319.1543">NodeInterface</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="264" x2="571" y1="331" y2="331"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="261" x="269" y="345.2104">const DISPOSITION_FORMDATA = "form-data";</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="284" x="269" y="358.0151">const DISPOSITION_ATTACHMENT = "attachment";</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="297" x="269" y="370.8198">const HEADER_DISPOSITION = "content-disposition";</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="274" x="269" y="383.6245">const HEADER_CONTENT_TYPE = "content-type";</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="174" x="269" y="396.4292">const ATTRIB_NAME = "name";</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="213" x="269" y="409.2339">const ATTRIB_FILENAME = "filename";</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="264" x2="571" y1="415.8281" y2="415.8281"/><ellipse cx="274" cy="427.7305" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="65" x="283" y="430.0386">__toString()</text><ellipse cx="274" cy="440.5352" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="147" x="283" y="442.8433">add(NodeInterface $node)</text><ellipse cx="274" cy="453.3398" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="283" y="455.6479">getName()</text><ellipse cx="274" cy="466.1445" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="239" x="283" y="468.4526">setContentDisposition(string $disposition)</text><ellipse cx="274" cy="478.9492" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="66" x="283" y="481.2573">getNested()</text><!--class StreamInterface--><rect fill="#FEFECE" filter="url(#f8pgrtx88lip3)" height="59.207" id="StreamInterface" style="stroke: #A80036; stroke-width: 1.5;" width="134" x="93.5" y="364"/><ellipse cx="108.5" cy="380" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M109.4531,376.7813 L109.4531,383.2969 L111.1719,383.2969 C111.625,383.2969 111.7656,383.3281 111.9375,383.4531 C112.1719,383.625 112.2813,383.875 112.2813,384.1563 C112.2813,384.7188 111.9219,385 111.1719,385 L106.0313,385 C105.625,385 105.4219,384.9531 105.2656,384.8281 C105.0469,384.6719 104.9063,384.4063 104.9063,384.1563 C104.9063,383.8594 105.0625,383.5781 105.3125,383.4219 C105.4688,383.3125 105.5938,383.2969 106.0313,383.2969 L107.75,383.2969 L107.75,376.7813 L106.0313,376.7813 C105.6094,376.7813 105.4219,376.75 105.2656,376.6406 C105.0469,376.4688 104.9063,376.2188 104.9063,375.9375 C104.9063,375.6563 105.0625,375.3594 105.3125,375.2031 C105.4688,375.1094 105.5938,375.0938 106.0313,375.0938 L111.1719,375.0938 C111.625,375.0938 111.7656,375.125 111.9375,375.2344 C112.1719,375.4063 112.2813,375.6719 112.2813,375.9375 C112.2813,376.2344 112.1406,376.5156 111.875,376.6719 C111.75,376.75 111.5625,376.7813 111.1719,376.7813 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="102" x="122.5" y="384.1543">StreamInterface</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="94.5" x2="226.5" y1="396" y2="396"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="94.5" x2="144" y1="410.4023" y2="410.4023"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="94.5" x2="144" y1="412.4023" y2="412.4023"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="33" x="144" y="413.7104">PSR-7</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="177" x2="226.5" y1="410.4023" y2="410.4023"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="177" x2="226.5" y1="412.4023" y2="412.4023"/><!--class AbstractNode--><rect fill="#FEFECE" filter="url(#f8pgrtx88lip3)" height="150.4375" id="AbstractNode" style="stroke: #A80036; stroke-width: 1.5;" width="265" x="731" y="40"/><ellipse cx="816.75" cy="56" fill="#A9DCDF" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M818.3281,57.8125 L814.2813,57.8125 L813.8906,58.7969 L814.2813,58.7969 C814.7344,58.7969 814.875,58.8281 815.0469,58.9531 C815.2656,59.125 815.3906,59.375 815.3906,59.6563 C815.3906,59.9375 815.25,60.2344 814.9844,60.375 C814.8594,60.4688 814.6406,60.5 814.2813,60.5 L812.0156,60.5 C811.2656,60.5 810.8906,60.2188 810.8906,59.6563 C810.8906,59.3594 811.0469,59.0781 811.2969,58.9219 C811.4531,58.8125 811.6094,58.7969 812.0313,58.7969 L814.6719,52.2813 L813.5938,52.2813 C813.1563,52.2813 812.9844,52.25 812.8125,52.1406 C812.5938,51.9688 812.4531,51.7188 812.4531,51.4375 C812.4531,51.1563 812.6094,50.875 812.8594,50.7031 C813.0156,50.6094 813.1406,50.5938 813.5938,50.5938 L817.2656,50.5938 L820.6563,58.7969 C821.125,58.7969 821.2813,58.8281 821.4531,58.9688 C821.6719,59.125 821.8125,59.375 821.8125,59.6563 C821.8125,59.9375 821.6563,60.2344 821.4063,60.375 C821.2656,60.4688 821.0469,60.5 820.6875,60.5 L818.3281,60.5 C817.9063,60.5 817.7031,60.4531 817.5625,60.3281 C817.3438,60.1719 817.2031,59.9219 817.2031,59.6563 C817.2031,59.3594 817.3594,59.0781 817.6094,58.9219 C817.7656,58.8125 817.875,58.7969 818.3281,58.7969 L818.7188,58.7969 Z M817.625,56.1094 L816.2969,52.8438 L814.9531,56.1094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="85" x="837.25" y="60.1543">AbstractNode</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="732" x2="995" y1="72" y2="72"/><polygon fill="none" points="742,78.9023,746,82.9023,742,86.9023,738,82.9023" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="751" y="86.2104">$name;</text><polygon fill="none" points="742,91.707,746,95.707,742,99.707,738,95.707" style="stroke: #B38D22; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="139" x="751" y="99.0151">$contentDisposition = '';</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="732" x2="995" y1="105.6094" y2="105.6094"/><ellipse cx="742" cy="117.5117" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="65" x="751" y="119.8198">__toString()</text><ellipse cx="742" cy="130.3164" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="147" x="751" y="132.6245">add(NodeInterface $node)</text><ellipse cx="742" cy="143.1211" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="751" y="145.4292">getName()</text><ellipse cx="742" cy="155.9258" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="239" x="751" y="158.2339">setContentDisposition(string $disposition)</text><ellipse cx="742" cy="168.7305" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="66" x="751" y="171.0386">getNested()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="739" y="178.5352"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="751" y="183.8433">getContentDisposition()</text><!--class Attachment--><rect fill="#FEFECE" filter="url(#f8pgrtx88lip3)" height="252.875" id="Attachment" style="stroke: #A80036; stroke-width: 1.5;" width="640" x="847.5" y="267"/><ellipse cx="1126.75" cy="283" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1129.0938,278.6719 L1129.2656,278.75 C1129.4844,278.4375 1129.6875,278.3438 1129.9844,278.3438 C1130.2813,278.3438 1130.5625,278.4844 1130.7188,278.75 C1130.8125,278.9063 1130.8281,279.0313 1130.8281,279.4688 L1130.8281,280.8906 C1130.8281,281.3125 1130.7969,281.5 1130.6875,281.6563 C1130.5156,281.875 1130.25,282.0156 1129.9844,282.0156 C1129.7656,282.0156 1129.5313,281.9063 1129.3906,281.7656 C1129.25,281.6406 1129.2188,281.5156 1129.1563,281.1094 C1129.0625,280.7031 1128.8906,280.4844 1128.4063,280.2031 C1127.9375,279.9531 1127.3281,279.7969 1126.75,279.7969 C1125.0156,279.7969 1123.7656,281.1094 1123.7656,282.8906 L1123.7656,283.9844 C1123.7656,285.6875 1125.0625,286.7813 1127.1094,286.7813 C1127.875,286.7813 1128.5625,286.6563 1128.9844,286.3906 C1129.1719,286.2969 1129.1719,286.2969 1129.625,285.8125 C1129.8125,285.625 1130.0156,285.5469 1130.2344,285.5469 C1130.7031,285.5469 1131.0938,285.9375 1131.0938,286.3906 C1131.0938,286.7813 1130.7656,287.2344 1130.1875,287.6406 C1129.4375,288.1875 1128.2813,288.4844 1127.0625,288.4844 C1124.1719,288.4844 1122.0625,286.5938 1122.0625,284.0156 L1122.0625,282.8906 C1122.0625,280.1719 1124.0625,278.0938 1126.6875,278.0938 C1127.5625,278.0938 1128.1563,278.2344 1129.0938,278.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="73" x="1147.25" y="287.1543">Attachment</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="848.5" x2="1486.5" y1="299" y2="299"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="855.5" y="307.9023"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="83" x="867.5" y="313.2104">$filename = '';</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="855.5" y="320.707"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="867.5" y="326.0151">$stream;</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="855.5" y="333.5117"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="66" x="867.5" y="338.8198">$mime = '';</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="855.5" y="346.3164"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="73" x="867.5" y="351.6245">$disposition;</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="871.5" y="364.4292"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="287" x="867.5" y="377.2339">const DEFAULT_MIME = "application/octet-stream";</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="373" x="867.5" y="390.0386">const BINARY_ENCODING = "content-transfer-encoding: binary\n";</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="848.5" x2="1486.5" y1="396.6328" y2="396.6328"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="614" x="867.5" y="410.8433">__construct(string $filename, string $name, StreamInterface $data, string $mime='', string $disposition='')</text><ellipse cx="858.5" cy="421.3398" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="65" x="867.5" y="423.6479">__toString()</text><ellipse cx="858.5" cy="434.1445" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="66" x="867.5" y="436.4526">getNested()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="855.5" y="443.9492"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="867.5" y="449.2573">headerName()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="855.5" y="456.7539"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="867.5" y="462.062">getMime()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="855.5" y="469.5586"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="201" x="867.5" y="474.8667">isBinaryByMime(string $mimeType)</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="855.5" y="482.3633"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="867.5" y="487.6714">contentEncoding()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="855.5" y="495.168"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="77" x="867.5" y="500.4761">getContents()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="855.5" y="507.9727"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="137" x="867.5" y="513.2808">ifBlank($value, $default)</text><!--class FormInput--><rect fill="#FEFECE" filter="url(#f8pgrtx88lip3)" height="99.2188" id="FormInput" style="stroke: #A80036; stroke-width: 1.5;" width="183" x="629" y="344"/><ellipse cx="684.75" cy="360" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M687.0938,355.6719 L687.2656,355.75 C687.4844,355.4375 687.6875,355.3438 687.9844,355.3438 C688.2813,355.3438 688.5625,355.4844 688.7188,355.75 C688.8125,355.9063 688.8281,356.0313 688.8281,356.4688 L688.8281,357.8906 C688.8281,358.3125 688.7969,358.5 688.6875,358.6563 C688.5156,358.875 688.25,359.0156 687.9844,359.0156 C687.7656,359.0156 687.5313,358.9063 687.3906,358.7656 C687.25,358.6406 687.2188,358.5156 687.1563,358.1094 C687.0625,357.7031 686.8906,357.4844 686.4063,357.2031 C685.9375,356.9531 685.3281,356.7969 684.75,356.7969 C683.0156,356.7969 681.7656,358.1094 681.7656,359.8906 L681.7656,360.9844 C681.7656,362.6875 683.0625,363.7813 685.1094,363.7813 C685.875,363.7813 686.5625,363.6563 686.9844,363.3906 C687.1719,363.2969 687.1719,363.2969 687.625,362.8125 C687.8125,362.625 688.0156,362.5469 688.2344,362.5469 C688.7031,362.5469 689.0938,362.9375 689.0938,363.3906 C689.0938,363.7813 688.7656,364.2344 688.1875,364.6406 C687.4375,365.1875 686.2813,365.4844 685.0625,365.4844 C682.1719,365.4844 680.0625,363.5938 680.0625,361.0156 L680.0625,359.8906 C680.0625,357.1719 682.0625,355.0938 684.6875,355.0938 C685.5625,355.0938 686.1563,355.2344 687.0938,355.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="63" x="705.25" y="364.1543">FormInput</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="630" x2="811" y1="376" y2="376"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="637" y="384.9023"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="37" x="649" y="390.2104">$value</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="630" x2="811" y1="396.8047" y2="396.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="157" x="649" y="411.0151">__construct($name, $value)</text><ellipse cx="640" cy="421.5117" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="65" x="649" y="423.8198">__toString()</text><ellipse cx="640" cy="434.3164" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="66" x="649" y="436.6245">getNested()</text><!--class Envelope--><rect fill="#FEFECE" filter="url(#f8pgrtx88lip3)" height="252.875" id="Envelope" style="stroke: #A80036; stroke-width: 1.5;" width="385" x="225" y="583"/><ellipse cx="384.75" cy="599" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M387.0938,594.6719 L387.2656,594.75 C387.4844,594.4375 387.6875,594.3438 387.9844,594.3438 C388.2813,594.3438 388.5625,594.4844 388.7188,594.75 C388.8125,594.9063 388.8281,595.0313 388.8281,595.4688 L388.8281,596.8906 C388.8281,597.3125 388.7969,597.5 388.6875,597.6563 C388.5156,597.875 388.25,598.0156 387.9844,598.0156 C387.7656,598.0156 387.5313,597.9063 387.3906,597.7656 C387.25,597.6406 387.2188,597.5156 387.1563,597.1094 C387.0625,596.7031 386.8906,596.4844 386.4063,596.2031 C385.9375,595.9531 385.3281,595.7969 384.75,595.7969 C383.0156,595.7969 381.7656,597.1094 381.7656,598.8906 L381.7656,599.9844 C381.7656,601.6875 383.0625,602.7813 385.1094,602.7813 C385.875,602.7813 386.5625,602.6563 386.9844,602.3906 C387.1719,602.2969 387.1719,602.2969 387.625,601.8125 C387.8125,601.625 388.0156,601.5469 388.2344,601.5469 C388.7031,601.5469 389.0938,601.9375 389.0938,602.3906 C389.0938,602.7813 388.7656,603.2344 388.1875,603.6406 C387.4375,604.1875 386.2813,604.4844 385.0625,604.4844 C382.1719,604.4844 380.0625,602.5938 380.0625,600.0156 L380.0625,598.8906 C380.0625,596.1719 382.0625,594.0938 384.6875,594.0938 C385.5625,594.0938 386.1563,594.2344 387.0938,594.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="57" x="405.25" y="603.1543">Envelope</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="226" x2="609" y1="615" y2="615"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="273" x="231" y="629.2104">const TYPE_FORM_DATA = 'multipart/form-data';</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="219" x="231" y="642.0151">const TYPE_MIXED = 'multipart/mixed';</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="226" x="231" y="654.8198">const ATTRIB_BOUNDARY = "boundary";</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="226" x2="609" y1="661.4141" y2="661.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="312" x="245" y="675.6245">__construct(string $name, string $type='', $items = [])</text><ellipse cx="236" cy="686.1211" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="65" x="245" y="688.4292">__toString()</text><ellipse cx="236" cy="698.9258" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="147" x="245" y="701.2339">add(NodeInterface $node)</text><ellipse cx="236" cy="711.7305" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="245" y="714.0386">getName()</text><ellipse cx="236" cy="724.5352" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="239" x="245" y="726.8433">setContentDisposition(string $disposition)</text><ellipse cx="236" cy="737.3398" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="66" x="245" y="739.6479">getNested()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="249" y="752.4526"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="233" y="759.9492"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="81" x="245" y="765.2573">exists($name)</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="233" y="772.7539"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="58" x="245" y="778.062">getPrefix()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="233" y="785.5586"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="58" x="245" y="790.8667">getItems()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="233" y="798.3633"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="245" y="803.6714">getItemsAsString()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="233" y="811.168"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="117" x="245" y="816.4761">getItemString($item)</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="233" y="823.9727"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="359" x="245" y="829.2808">fixNodeContentDisposition(NodeInterface $node, string $name)</text><!--class FormBody--><rect fill="#FEFECE" filter="url(#f8pgrtx88lip3)" height="112.0234" id="FormBody" style="stroke: #A80036; stroke-width: 1.5;" width="549" x="6" y="59"/><ellipse cx="245.75" cy="75" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M248.0938,70.6719 L248.2656,70.75 C248.4844,70.4375 248.6875,70.3438 248.9844,70.3438 C249.2813,70.3438 249.5625,70.4844 249.7188,70.75 C249.8125,70.9063 249.8281,71.0313 249.8281,71.4688 L249.8281,72.8906 C249.8281,73.3125 249.7969,73.5 249.6875,73.6563 C249.5156,73.875 249.25,74.0156 248.9844,74.0156 C248.7656,74.0156 248.5313,73.9063 248.3906,73.7656 C248.25,73.6406 248.2188,73.5156 248.1563,73.1094 C248.0625,72.7031 247.8906,72.4844 247.4063,72.2031 C246.9375,71.9531 246.3281,71.7969 245.75,71.7969 C244.0156,71.7969 242.7656,73.1094 242.7656,74.8906 L242.7656,75.9844 C242.7656,77.6875 244.0625,78.7813 246.1094,78.7813 C246.875,78.7813 247.5625,78.6563 247.9844,78.3906 C248.1719,78.2969 248.1719,78.2969 248.625,77.8125 C248.8125,77.625 249.0156,77.5469 249.2344,77.5469 C249.7031,77.5469 250.0938,77.9375 250.0938,78.3906 C250.0938,78.7813 249.7656,79.2344 249.1875,79.6406 C248.4375,80.1875 247.2813,80.4844 246.0625,80.4844 C243.1719,80.4844 241.0625,78.5938 241.0625,76.0156 L241.0625,74.8906 C241.0625,72.1719 243.0625,70.0938 245.6875,70.0938 C246.5625,70.0938 247.1563,70.2344 248.0938,70.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="61" x="266.25" y="79.1543">FormBody</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="554" y1="91" y2="91"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="99.9023"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="40" x="26" y="105.2104">$state;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="554" y1="111.8047" y2="111.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="195" x="26" y="126.0151">__construct(Envelope $initialState)</text><ellipse cx="17" cy="136.5117" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="523" x="26" y="138.8198">addAttachment(string $name, StreamInterface $value, string $mimeType, string $fileName)</text><ellipse cx="17" cy="149.3164" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="244" x="26" y="151.6245">addFormInput(string $name, string $value)</text><ellipse cx="17" cy="162.1211" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="65" x="26" y="164.4292">__toString()</text><!--link NodeInterface to Envelope--><path d="M417.5,508.622 C417.5,532.779 417.5,558.402 417.5,582.956 " fill="none" id="NodeInterface-Envelope" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="410.5,508.285,417.5,488.285,424.5,508.285,410.5,508.285" style="stroke: #A80036; stroke-width: 1.0;"/><!--link NodeInterface to AbstractNode--><path d="M578.955,288.056 C590.283,280.892 601.548,273.816 612.5,267 C653.3,241.606 698.181,214.384 738.57,190.144 " fill="none" id="NodeInterface-AbstractNode" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="582.385,294.17,561.747,298.974,574.885,282.348,582.385,294.17" style="stroke: #A80036; stroke-width: 1.0;"/><!--link AbstractNode to Envelope--><path d="M996.238,128.118 C1165.34,146.62 1443.2,188.352 1505.5,267 C1581.94,363.505 1585.78,450.667 1505.5,544 C1394.02,673.601 906.652,702.391 623.453,707.984 " fill="none" id="AbstractNode-Envelope" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#FFFFFF" points="610.124,708.233,616.1977,712.1202,622.1219,708.0088,616.0482,704.1216,610.124,708.233" style="stroke: #A80036; stroke-width: 1.0;"/><!--link AbstractNode to Attachment--><path d="M959.954,203.729 C982.063,223.838 1005.99,245.6 1029.47,266.954 " fill="none" id="AbstractNode-Attachment" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="955.052,208.732,944.966,190.097,964.472,198.376,955.052,208.732" style="stroke: #A80036; stroke-width: 1.0;"/><!--link Attachment to StreamInterface--><path d="M931.536,266.919 C892.573,251.04 851.866,237.301 812,228.5 C692.868,202.201 369.626,169.213 263,228.5 C216.294,254.47 188.135,311.514 173.459,351.209 " fill="none" id="Attachment-StreamInterface" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="169.076,363.681,174.8389,359.3464,173.0542,352.3596,167.2913,356.6942,169.076,363.681" style="stroke: #A80036; stroke-width: 1.0;"/><!--link AbstractNode to FormInput--><path d="M815.888,208.062 C792.392,253.493 765.007,306.443 745.622,343.924 " fill="none" id="AbstractNode-FormInput" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="809.773,204.646,825.179,190.097,822.209,211.077,809.773,204.646" style="stroke: #A80036; stroke-width: 1.0;"/><!--link FormBody to FormInput--><path d="M329.473,171.282 C353.631,195.149 384.617,221.174 417.5,237 C487.027,270.463 519.598,232.267 588.5,267 C620.532,283.147 650.095,309.627 673.088,334.112 " fill="none" id="FormBody-FormInput" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="681.887,343.729,680.7874,336.6022,673.7859,334.8762,674.8855,342.003,681.887,343.729" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="418.5" y="233.0669">internal</text><!--link FormBody to Attachment--><path d="M497.55,171.033 C599.003,197.945 721.072,232.032 829.5,267 C831.224,267.556 832.953,268.116 834.685,268.679 " fill="none" id="FormBody-Attachment" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="847.057,272.732,842.601,267.0624,835.6537,268.9951,840.1097,274.6646,847.057,272.732" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="48" x="725.5" y="233.0669">internal</text><!--link FormBody to Envelope--><path d="M169.802,171.082 C133.572,195.179 97.5168,227.163 77.5,267 C22.2255,377.005 12.096,439.699 77.5,544 C108.673,593.712 159.594,628.769 212.649,653.343 " fill="none" id="FormBody-Envelope" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="224.716,658.741,220.8724,652.6396,213.762,653.8409,217.6057,659.9423,224.716,658.741" style="stroke: #A80036; stroke-width: 1.0;"/><!--link FormBody to StreamInterface--><path d="M256.505,171.289 C233.337,224.672 198.803,304.243 178.083,351.985 " fill="none" id="FormBody-StreamInterface" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="172.877,363.98,178.9347,360.0679,177.6533,352.9715,171.5957,356.8837,172.877,363.98" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml
together {
    interface NodeInterface {
        const DISPOSITION_FORMDATA = "form-data";
        const DISPOSITION_ATTACHMENT = "attachment";
        const HEADER_DISPOSITION = "content-disposition";
        const HEADER_CONTENT_TYPE = "content-type";
        const ATTRIB_NAME = "name";
        const ATTRIB_FILENAME = "filename";

        +__toString()
        +add(NodeInterface $node)
        +getName()
        +setContentDisposition(string $disposition)
        +getNested()
    }

    interface StreamInterface {
        ==PSR-7==
    }
}

class Envelope {
    const TYPE_FORM_DATA = 'multipart/form-data';
    const TYPE_MIXED = 'multipart/mixed';
    const ATTRIB_BOUNDARY = "boundary";

    __construct(string $name, string $type='', $items = [])
    +__toString()
    +add(NodeInterface $node)
    +getName()
    +setContentDisposition(string $disposition)
    +getNested()

    -exists($name)
    -getPrefix()
    -getItems()
    -getItemsAsString()
    -getItemString($item)
    -fixNodeContentDisposition(NodeInterface $node, string $name)
}
NodeInterface <|- - Envelope

together {
    abstract class AbstractNode {
        #$name;
        #$contentDisposition = '';
        +__toString()
        +add(NodeInterface $node)
        +getName()
        +setContentDisposition(string $disposition)
        +getNested()
        -getContentDisposition()
    }
    NodeInterface <|- - AbstractNode
    AbstractNode ..o Envelope

    class Attachment {
        -$filename = '';
        -$stream;
        -$mime = '';
        -$disposition;

        const DEFAULT_MIME = "application/octet-stream";
        const BINARY_ENCODING = "content-transfer-encoding: binary\\n";

        __construct(string $filename, string $name, StreamInterface $data, string $mime='', string $disposition='')
        +__toString()
        +getNested()
        -headerName()
        -getMime()
        -isBinaryByMime(string $mimeType)
        -contentEncoding()
        -getContents()
        -ifBlank($value, $default)
    }
    AbstractNode <|- - Attachment
    Attachment - -o StreamInterface

    class FormInput {
        -$value
        __construct($name, $value)
        +__toString()
        +getNested()
    }
    AbstractNode <|- - FormInput
}

class FormBody {
    -$state;

    __construct(Envelope $initialState)
    +addAttachment(string $name, StreamInterface $value, string $mimeType, string $fileName)
    +addFormInput(string $name, string $value)
    +__toString()
}
FormBody ..* FormInput : internal
FormBody ..* Attachment : internal
FormBody - -o Envelope
FormBody - -o StreamInterface
@enduml

PlantUML version 1.2018.01(Sun Jan 28 18:08:22 UTC 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>